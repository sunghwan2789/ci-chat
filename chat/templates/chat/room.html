{% load static %}
<!DOCTYPE html>
<html class="h-100">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{% static 'bootstrap-4.3.1-dist/css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/custom.css' %}">
        <title>ci_chat</title>
        <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
        <script src="{% static 'bootstrap-4.3.1-dist/js/bootstrap.min.js' %}"></script>
        <script src="{% static 'js/chat.js' %}"></script>
        <script src="{% static 'js/reconnecting-websocket.min.js' %}"></script>
        <script>
            const onSubmit = (e) => {
                e.preventDefault()

            }
        </script>
    </head>
    <body class="h-100">
        <div class="h-100 d-flex flex-column portlet portlet-default mb-0">
            <div class="portlet-heading">
                <div class="portlet-title">
                    <h4>실시간 채팅방 @ <a href="{% url 'chat_room' room.label %}">{{ room.label }}</a></h4>
                </div>
                <div class="clearfix"></div>
            </div>
            <div id="chat" class="flex-grow-1 overflow-auto container-fluid">
            {% for message in messages %}
                {% ifchanged %}
                    {% include './messagedate.html' with message=message %}
                {% endifchanged %}
                {% include './message.html' with message=message %}
            {% endfor %}
            </div>
            <div class="portlet-footer">
            <form id="form" onsubmit="onSubmit(...arguments)">
                <div class="form-row">
                    <div class="col-4">
                        <input type="text" id="holder" name="holder" class="form-control" placeholder="이름" maxlength="20">
                    </div>
                    <div class="col">
                        <select class="form-control d-inline-block w-auto" id="code" name="code">
                            <option value="">선택</option>
                            <option value="morse">모스부호</option>
                        </select>
                        <button type="button" class="btn btn-white">암호화</button>
                    </div>
                </div>
                <div class="form-row" style="height: 90px">
                    <div class="col-10">
                        <textarea id="message" name="message" class="form-control h-100" placeholder="메시지를 입력하세요" maxlength="100"></textarea>
                    </div>
                    <div class="col-2">
                        <button type="submit" class="btn btn-white btn-block h-100">전송</button>
                    </div>
                </div>
            </form>
            </div>
        </div>
    </body>
</html>
